# 自分用備忘録
## 概要と目的
元々は[プロフリ][プロフリ]というサービスを用いてSNSなどの連絡先一覧を表示していたが、自分専用のものを作ってみたくなったので作ってみた。GitHub Pagesを用いて無料でサイトを公開できるようにしてみた。<br>HTMLやCSSを一から書くのは面倒なので、無料で使えるサイトテーマを使用することにしたが、連絡先一覧を表示するだけなのでテーマを使用しなくてもブロックボタンだけどこかから拾ってくればできたかもしれない。
## 使用したもの
- Hugo（静的サイトジェネレータ）
- Go
- GitHub (Pages)
- Git
- Command PromptやPower Shelk
- VSコードなどのテキトーなテキストエディタ（Cursorを使用）
## 作成方法
1. [Hugo][install]という静的サイトジェネレータをダウンロード
2. コマンドプロンプトなどに``Hugo new site <プロジェクト名>``コマンドを入力。repositoryが作成される。その後プロジェクトのルートフォルダに移動。
4. [Hugo][Hugo]の公式ページに行き、気になったテーマを指示に従ってダウンロード。今回は[Lynx][Lynx]というテーマを使用
5. なぜか指示通りにしてもダウンロードされないので``.\themes``に手動でテーマのGitHubのrepositoryをクローン
6. ``.\themes\lynx``内のconfig.tomlファイルの中身を好きなように書き換える。リンクの追加方法は公式のREADMEを参照
7. Link単体の項目は色味やアイコンが同じでつまらなかったので、こちらの[Font Awesome][Font Awesome]からSVGファイルをダウンロードしてきて、``.\themes\lynx\assets\css``内部の``custom.css``をいじってみた。ネットでRGB値を調べることができるサービスもあるので、各種サービスの画面をスクショし、その画像を元にそちらで色味を合わせてみた
8. なんかよく分かんないけどとりあえず``config.tomlやその他の変更を加えたフォルダたち``をルートフォルダに配置した
9. GitHubにリモートデポジトリを作成してルートフォルダから全部Push。テーマはサブモジュール扱いにしておく
10. GitHub上のrepositoryの``Settigs > Pages``を選択し、公開
11. 普段のように``main > docs``を選択して手動でdeployできそうかと思ったが上手くいかなかったので、GitHub Actionsを使用することにした。幸いHugo対応のものがあったので、画面上からymlファイルを``.github/workflows``に追加した。配置する階層さえ合っていれば名前はどうでもよいので、デフォルトの``hugo.yml``のままにしておいた
12. GitHub Actionsでもなぜかdeploy出来なかったが、しばらくして過去の履歴を見てみたら成功しているものがあったので、そちらのURLを公開して完成
## 注意点や疑問点
- 他のHugoテーマでテストしてみたら上手くいったのに、なぜかLynxだと公式のREADMEの通りにやっても上手く作業ができなかった（``.\themes``への手動ダウンロードなどが必要だった）
- そのままだとpathが通っていないらしく、自分でpathを追加するファイルを作らなくてはいけなかった
- ``config.toml``に``theme = "lunx"``を追加したが、こちらはどこまで必要だったのか分からない
- baseURLはもともとコメントアウトされているが、そちらも``https://<ユーザー名>.github.io/<レポジトリ名>/``のURLを追加してコメントアウトを解除しておいた方がよい
- それで、なぜかbaseURLの記述をコメントアウトするとローカルサーバーを``hugo server``で起動したときの表示がバグる
- ``hugo``コマンドで``publicフォルダ``を生成すると、ローカルサーバーでは上手くいっていても``index.html``の表示がバグっている。が、多分あとで勝手にCSSなどが読み込まれて調節されるので気にしなくてよい
- ルートフォルダに``config.tomlとassets, staticフォルダ``は配置が必要だと思われる。``layouts``も当然配置しないと表示がバグる。ただ、``.\themes\lynx``内のコピー元の重複したファイルたちは削除していいのかは謎
- Deployが失敗した理由はGoのバージョン情報が間違って書き込まれていたかららしい。公式にも``1.21.5``と表記されているが○.○○というフォーマットにしなくてはいけないらしく、ルートフォルダ内のgo.modを``1.21``と書き換えたら直った。
- その後はGitHub Actionsでサイトをdeployしようとすると、``ymlファイル（hugo.yml）``内部の``tarコマンド``が``publicフォルダ``を見つけられないというエラーが出た。元の``config.toml``ファイルに``publishDir ="docs"``と書いていたからかもしれないが、そちらを修正して``hugo``でサイト情報が``public``に出力されるように（デフォルトの設定だと``public``）しても直らなかった。なぜたまたま解決してdeployできた履歴があったのかは謎
- YouTubeやブログなどでも参考情報は見つかるが、テーマごとにかなり操作が異なるので、困ったらChatGPTに聞くのが早いかもしれない。``ymlファイル``の書き換えなどが必要な場合はこちらからやるとよい

[install]: https://gohugo.io/installation/
[Lynx]: https://themes.gohugo.io/themes/lynx/
[プロフリ]: https://profu.link/
[Hugo]: https://gohugo.io/
[Font Awesome]: https://fontawesome.com/icons?d=gallery&p=2&s=brands
